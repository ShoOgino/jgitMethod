	@Override
	protected Result doRename() throws IOException {
		// TODO(spearce) Correctly handle renameing foo/bar to foo.

		destination.setExpectedOldObjectId(ObjectId.zeroId());
		destination.setNewObjectId(source.getRef().getObjectId());
		switch (destination.update()) {
		case NEW:
			source.delete();
			return Result.RENAMED;

		default:
			return destination.getResult();
		}
	}

