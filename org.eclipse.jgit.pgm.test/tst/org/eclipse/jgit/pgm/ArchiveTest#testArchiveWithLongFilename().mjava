	@Test
	public void testArchiveWithLongFilename() throws Exception {
		String filename = "";
		List<String> l = new ArrayList<String>();
		for (int i = 0; i < 20; i++) {
			filename = filename + "1234567890/";
			l.add(filename);
		}
		filename = filename + "1234567890";
		l.add(filename);
		writeTrashFile(filename, "file with long path");
		git.add().addFilepattern("1234567890").call();
		git.commit().setMessage("file with long name").call();

		byte[] result = CLIGitCommand.rawExecute(
				"git archive --format=zip HEAD", db);
		assertArrayEquals(l.toArray(new String[l.size()]),
				listZipEntries(result));
	}

