	@Test
	public void testArchiveWithLongFilename() throws Exception {
		String filename = "1234567890";
		for (int i = 0; i < 20; i++)
			filename = filename + "/1234567890";
		writeTrashFile(filename, "file with long path");
		git.add().addFilepattern("1234567890").call();
		git.commit().setMessage("file with long name").call();

		final byte[] result = CLIGitCommand.rawExecute( //
				"git archive HEAD", db);
		assertArrayEquals(new String[] { filename },
				listZipEntries(result));
	}

