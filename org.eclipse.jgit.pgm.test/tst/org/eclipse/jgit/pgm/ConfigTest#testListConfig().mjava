	@Test
	public void testListConfig() throws Exception {
		boolean isWindows = SystemReader.getInstance().getProperty("os.name")
				.startsWith("Windows");
		boolean isMac = SystemReader.getInstance().getProperty("os.name")
				.equals("Mac OS X");

		String[] output = execute("git config --list");
		List<String> expect = new ArrayList<>();
		expect.add("core.filemode=" + !isWindows);
		expect.add("core.logallrefupdates=true");
		if (isMac)
			expect.add("core.precomposeunicode=true");
		expect.add("core.repositoryformatversion=0");
		if (!FS.DETECTED.supportsSymlinks())
			expect.add("core.symlinks=false");
		expect.add(""); // ends with LF (last line empty)
		assertEquals("expected default configuration",
				Arrays.asList(expect.toArray()).toString(),
				Arrays.asList(output).toString());
	}

