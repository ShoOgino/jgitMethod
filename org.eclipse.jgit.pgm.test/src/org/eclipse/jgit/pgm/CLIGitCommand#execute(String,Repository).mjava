	public static List<String> execute(String str, Repository db)
			throws Exception {
		String[] args = split(str);
		if (!args[0].equalsIgnoreCase("git") || args.length < 2)
			throw new IllegalArgumentException(
					"Expected 'git <command> [<args>]', was:" + str);
		String[] argv = new String[args.length - 1];
		System.arraycopy(args, 1, argv, 0, args.length - 1);

		CLIGitCommand bean = new CLIGitCommand();
		final CmdLineParser clp = new CmdLineParser(bean);
		clp.parseArgument(argv);

		final TextBuiltin cmd = bean.getSubcommand();
		if (cmd.requiresRepository())
			cmd.init(db, null);
		else
			cmd.init(null, null);
		ByteArrayOutputStream baos = new ByteArrayOutputStream();
		cmd.out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(
				baos)));
		try {
			cmd.execute(bean.getArguments().toArray(
					new String[bean.getArguments().size()]));
		} catch (Die e) {
			return IO.readLines(e.getMessage());
		} finally {
			if (cmd.out != null)
				cmd.out.flush();
		}
		return IO.readLines(baos.toString());
	}

