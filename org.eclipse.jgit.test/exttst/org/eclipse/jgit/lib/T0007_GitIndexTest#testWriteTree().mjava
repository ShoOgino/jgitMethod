	public void testWriteTree() throws Exception {
		GitIndex index = new GitIndex(db);
		writeTrashFile("a/b", "data:a/b");
		writeTrashFile("a:b", "data:a:b");
		writeTrashFile("a.b", "data:a.b");
		index.add(trash, new File(trash, "a/b"));
		index.add(trash, new File(trash, "a:b"));
		index.add(trash, new File(trash, "a.b"));
		index.write();

		ObjectId id = index.writeTree();
		assertEquals("c696abc3ab8e091c665f49d00eb8919690b3aec3", id.name());

		writeTrashFile("a/b", "data:a/b");
		index.add(trash, new File(trash, "a/b"));

		if (canrungitstatus)
			assertEquals(0, system(trash, "git status"));
	}

