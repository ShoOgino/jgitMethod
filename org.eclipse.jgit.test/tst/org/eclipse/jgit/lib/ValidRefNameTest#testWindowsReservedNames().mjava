	@Test
	public void testWindowsReservedNames() {
		SystemReader original = SystemReader.getInstance();
		try {
			SystemReader.setInstance(new MockSystemReader() {
				public boolean isWindows() {
					return true;
				}
			});
			// re-using code from DirCacheCheckoutTest, hence
			// only testing for one of the special names.
			assertValid(false, "refs/heads/con");
			assertValid(false, "refs/con/x");
			assertValid(false, "con/heads/x");
			assertValid(true, "refs/heads/conx");
			assertValid(true, "refs/heads/xcon");
		} finally {
			SystemReader.setInstance(original);
		}
	}

