	@Test
	public void testModify() throws Exception {
		Git git = new Git(db);
		String path = "file";
		writeTrashFile(path, "content");

		git.add().addFilepattern(path).call();
		git.commit().setMessage("commit").call();

		DirCache dc = db.readDirCache();
		DirCacheEntry entry = dc.getEntry(path);

		long masterLastMod = entry.getLastModified();

		git.checkout().setCreateBranch(true).setName("side").call();

		Thread.sleep(10);
		String path2 = "file2";
		writeTrashFile(path2, "side content");
		git.add().addFilepattern(path2).call();
		git.commit().setMessage("commit").call();

		dc = db.readDirCache();
		entry = dc.getEntry(path);

		long sideLastMode = entry.getLastModified();

		Thread.sleep(2000);

		writeTrashFile(path, "uncommitted content");
		git.checkout().setName("master").call();

		dc = db.readDirCache();
		entry = dc.getEntry(path);

		assertTrue("shall have equal mod time!", masterLastMod == sideLastMode);
		assertTrue("shall not equal master timestamp!",
				entry.getLastModified() == masterLastMod);

	}

