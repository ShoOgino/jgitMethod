	protected static boolean recursiveDelete(final File dir, boolean silent,
			final String name, boolean failOnError) {
		assert !(silent && failOnError);
		if (!dir.exists())
			return silent;
		final File[] ls = dir.listFiles();
		if (ls != null) {
			for (int k = 0; k < ls.length; k++) {
				final File e = ls[k];
				if (e.isDirectory()) {
					silent = recursiveDelete(e, silent, name, failOnError);
				} else {
					if (!e.delete()) {
						if (!silent) {
							reportDeleteFailure(name, failOnError, e);
						}
						silent = !failOnError;
					}
				}
			}
		}
		if (!dir.delete()) {
			if (!silent) {
				reportDeleteFailure(name, failOnError, dir);
			}
			silent = !failOnError;
		}
		return silent;
	}

