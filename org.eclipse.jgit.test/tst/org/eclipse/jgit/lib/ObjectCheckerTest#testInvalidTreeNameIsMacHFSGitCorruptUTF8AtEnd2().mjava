	@Test
	public void testInvalidTreeNameIsMacHFSGitCorruptUTF8AtEnd2() {
		byte[] data = concat(Constants.encode("100644 .git"), new byte[] {
				(byte) 0xe2, (byte) 0xab });
		StringBuilder b = new StringBuilder();
		entry(b, "");
		data = concat(data, Constants.encode(b.toString()));
		try {
			checker.setSafeForMacOS(true);
			checker.checkTree(data);
			fail("incorrectly accepted an invalid tree");
		} catch (CorruptObjectException e) {
			assertEquals(
					"invalid name contains byte sequence '0xe2ab' which is not a valid UTF-8 character",
					e.getMessage());
		}
	}

