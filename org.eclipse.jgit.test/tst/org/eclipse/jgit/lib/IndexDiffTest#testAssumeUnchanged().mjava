	public void testAssumeUnchanged() throws Exception {
		Git git = new Git(db);
		String path = "file";
		writeTrashFile(path, "content");
		git.add().addFilepattern(path).call();
		String path2 = "file2";
		writeTrashFile(path2, "content");
		git.add().addFilepattern(path2).call();
		git.commit().setMessage("commit").call();
		assumeUnchanged(path2);
		writeTrashFile(path, "more content");
		writeTrashFile(path2, "more content");

		FileTreeIterator iterator = new FileTreeIterator(db);
		IndexDiff diff = new IndexDiff(db, Constants.HEAD, iterator);
		diff.diff();
		assertEquals(1, diff.getAssumeUnchanged().size());
		assertEquals(2, diff.getModified().size());
		assertEquals(0, diff.getChanged().size());

		git.add().addFilepattern(".").call();

		iterator = new FileTreeIterator(db);
		diff = new IndexDiff(db, Constants.HEAD, iterator);
		diff.diff();
		assertEquals(1, diff.getAssumeUnchanged().size());
		assertEquals(1, diff.getModified().size());
		assertEquals(1, diff.getChanged().size());
		assertTrue(diff.getAssumeUnchanged().contains("file2"));
		assertTrue(diff.getModified().contains("file2"));
		assertTrue(diff.getChanged().contains("file"));
	}

