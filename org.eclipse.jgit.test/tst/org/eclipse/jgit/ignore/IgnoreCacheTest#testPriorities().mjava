	public void testPriorities() {
		ignoreTestDir = JGitTestUtil.getTestResourceFile("excludeTest");
		assertTrue("Test resource directory is not a directory",ignoreTestDir.isDirectory());
		createExcludeFile();
		initCache();

		File test = new File(db.getDirectory().getParentFile(), "/src/test.stp");
		assertTrue("Resource file " + test.getName() + " is missing", test.exists());

		//Test basic exclude file
		IgnoreNode node = cache.getRules("src");
		assertNotNull("Excludes file was not initialized", node);

		/*
		 * src/.gitignore:
		 * /*.st?
		 * !/test.stp
		 * !/a.c
		 * /a.c
		 *
		 * ./.gitignore:
		 * !/notignored
		 *
		 * .git/info/exclude:
		 * /test.stp
		 * /notignored
		 */
		assertIgnored("src/a.c");
		assertIgnored("test.stp");
		assertIgnored("src/blank.stp");
		assertNotIgnored("notignored");
		assertNotIgnored("src/test.stp");

		assertEquals(4, node.getRules().size());

		/*
		 * new/.gitignore:
		 * notarealfile
		 *
		 * new/a/.gitignore:
		 * <empty>
		 *
		 * new/a/b2/.gitignore:
		 * <does not exist>
		 *
		 * new/a/b2/c/.gitignore:
		 * /notarealfile2
		 */
		assertIgnored("new/a/b2/c/notarealfile2");
		assertIgnored("new/notarealfile");
		assertIgnored("new/a/notarealfile");
		assertNotIgnored("new/a/b2/c/test.stp");
		assertNotIgnored("new/a/b2/c");
		assertNotIgnored("new/a/b2/nonexistent");
	}

