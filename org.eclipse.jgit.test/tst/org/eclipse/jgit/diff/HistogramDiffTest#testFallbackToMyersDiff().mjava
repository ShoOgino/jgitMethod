	public void testFallbackToMyersDiff() {
		HistogramDiff hd = new HistogramDiff();
		hd.setMaxChainLength(64);

		String a = DiffTestDataGenerator.generateSequence(40000, 971, 3);
		String b = DiffTestDataGenerator.generateSequence(40000, 1621, 5);
		CharCmp cmp = new CharCmp();
		CharArray ac = new CharArray(a);
		CharArray bc = new CharArray(b);
		EditList r;

		// Without fallback our results are limited due to collisions.
		hd.setFallbackAlgorithm(null);
		r = hd.diff(cmp, ac, bc);
		assertEquals(70, r.size());

		// Results go up when we add a fallback for the high collision regions.
		hd.setFallbackAlgorithm(MyersDiff.INSTANCE);
		r = hd.diff(cmp, ac, bc);
		assertEquals(73, r.size());

		// But they still differ from Myers due to the way we did early steps.
		EditList myersResult = MyersDiff.INSTANCE.diff(cmp, ac, bc);
		assertFalse("Not same as Myers", myersResult.equals(r));
	}

