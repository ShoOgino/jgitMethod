	@Override
	protected void run() throws Exception {
		final org.eclipse.jgit.transport.ReceivePack rp;

		if (new File(dstGitdir, Constants.DOT_GIT).isDirectory())
			dstGitdir = new File(dstGitdir, Constants.DOT_GIT);
		db = new Repository(dstGitdir);
		if (!db.getObjectsDirectory().isDirectory())
			throw die(MessageFormat.format(CLIText.get().notAGitRepository, dstGitdir.getPath()));
		rp = new org.eclipse.jgit.transport.ReceivePack(db);
		rp.receive(System.in, System.out, System.err);
	}

