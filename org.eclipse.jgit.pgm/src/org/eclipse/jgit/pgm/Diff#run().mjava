	@Override
	protected void run() throws Exception {
		List<DiffEntry> files = scan();

		if (showNameAndStatusOnly) {
			nameStatus(out, files);
			out.flush();

		} else {
			BufferedOutputStream o = new BufferedOutputStream(System.out);
			fmt.format(o, db, files);
			o.flush();
		}
	}

