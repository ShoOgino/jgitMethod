	/**
	 * Write a blob with data from a stream
	 *
	 * @param len
	 *            number of bytes to consume from the stream
	 * @param is
	 *            stream with blob data
	 * @return SHA-1 of the blob
	 * @throws IOException
	 */
	public ObjectId writeBlob(final long len, final InputStream is)
			throws IOException {
		try {
			ObjectId id = inserter.insert(OBJ_BLOB, len, is);
			inserter.flush();
			return id;
		} finally {
			inserter.release();
		}
	}

