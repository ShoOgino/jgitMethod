	private RebaseResult finishRebase(RevCommit newHead,
			boolean lastStepWasForward) throws IOException {
		String headName = rebaseState.readFile(HEAD_NAME);
		updateHead(headName, newHead, upstreamCommit);
		FileUtils.delete(rebaseState.getDir(), FileUtils.RECURSIVE);
		if (lastStepWasForward || newHead == null)
			return RebaseResult.FAST_FORWARD_RESULT;
		return RebaseResult.OK_RESULT;
	}

