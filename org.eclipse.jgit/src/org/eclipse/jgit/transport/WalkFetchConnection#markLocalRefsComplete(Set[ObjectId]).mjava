	private void markLocalRefsComplete(final Set<ObjectId> have) throws TransportException {
		Map<String, Ref> refs;
		try {
			refs = local.getRefDatabase().getRefs(ALL);
		} catch (IOException e) {
			throw new TransportException(e.getMessage(), e);
		}
		for (final Ref r : refs.values()) {
			try {
				markLocalObjComplete(revWalk.parseAny(r.getObjectId()));
			} catch (IOException readError) {
				throw new TransportException(MessageFormat.format(JGitText.get().localRefIsMissingObjects, r.getName()), readError);
			}
		}
		for (final ObjectId id : have) {
			try {
				markLocalObjComplete(revWalk.parseAny(id));
			} catch (IOException readError) {
				throw new TransportException(MessageFormat.format(JGitText.get().transportExceptionMissingAssumed, id.name()), readError);
			}
		}
	}

