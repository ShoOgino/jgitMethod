	@Override
	public int read(byte[] b, int off, int len) throws IOException {
		int cnt = 0;
		while (0 < len) {
			final InputStream in = head();
			final int n = in.read(b, off, len);
			if (0 < n) {
				cnt += n;
				off += n;
				len -= n;
			} else if (in == EOF)
				return 0 < cnt ? cnt : -1;
			else
				pop();
		}
		return cnt;
	}

