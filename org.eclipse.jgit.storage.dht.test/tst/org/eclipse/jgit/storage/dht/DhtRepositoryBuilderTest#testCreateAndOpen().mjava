	@Test
	public void testCreateAndOpen() throws IOException {
		String name = "test.git";

		DhtRepository repo1 = db.open(name);
		assertSame(db, repo1.getDatabase());
		assertSame(repo1, repo1.getRefDatabase().getRepository());
		assertSame(repo1, repo1.getObjectDatabase().getRepository());

		assertEquals(name, repo1.getRepositoryName().asString());
		assertNull(repo1.getRepositoryKey());
		assertFalse(repo1.getObjectDatabase().exists());

		repo1.create(true);
		assertNotNull(repo1.getRepositoryKey());
		assertTrue(repo1.getObjectDatabase().exists());

		DhtRepository repo2 = db.open(name);
		assertNotNull(repo2.getRepositoryKey());
		assertTrue(repo2.getObjectDatabase().exists());
		assertEquals(0, repo2.getAllRefs().size());

		Ref HEAD = repo2.getRef(Constants.HEAD);
		assertTrue(HEAD.isSymbolic());
		assertEquals(Constants.R_HEADS + Constants.MASTER, //
				HEAD.getLeaf().getName());
	}

