	@Test
	public void testObjects512_ManyBuckets() throws DhtException {
		int[] ints = new int[512];
		for (int i = 0; i < 256; i++) {
			ints[i] = (i << 8) | 0;
			ints[i + 256] = (i << 8) | 1;
		}
		List<PackedObjectInfo> objs = objects(ints);
		ChunkIndex idx = index(objs);

		assertEquals(header(1, 2), header(objs));
		assertEquals(512, idx.getObjectCount());
		assertEquals(2 + 256 + 512 * 20 + 512 * 2 //
				+ 12 + 4 * 256, idx.getIndexSize());
		assertTrue(isSorted(objs));

		for (int i = 0; i < objs.size(); i++) {
			assertEquals(objs.get(i), idx.getObjectId(i));
			assertEquals(objs.get(i).getOffset(), idx.getOffset(i));
			assertEquals(objs.get(i).getOffset(), idx.findOffset(objs.get(i)));
		}
	}

